
# Privilege walk back-end
_**Developer Note:**_ Please update the gitignore before you push. Make sure the repo is clear of IDE settings (ex: files generated by VSCode) and other dirty files before a push is made.

Be sure to check the [API Documentation](docs/api_doc.md) if you are planning to user the APIs for your own front-end

# Running instructions
## 1. Without using Docker
* At first, create a python virtual environment by running the comand `virtualenv venv`. (If you don't have `virtualenv` installed, Google it up and install it). Note: you can also use your own name instead of `venv`, but please make sure you include that in the `.gitignore` file.
* Switch to (activate) the virtual environment by running `source <path_to_the_venv_you_created>/venv/bin/activate`. Usually, you'd be running it within the app's directory, so you'll just have to run `source venv/bin/activate`.
* Install the dependencies by running `pip3 install -r requirements.txt`, which will read the dependencies from `requirements.txt` file install them for you.
* To run the development server, just run `python3 manage.py runserver`.


# Testing instructions
## BDD Tests
BDD in this project is implemented using [behave-django](https://behave-django.readthedocs.io/en/stable/). Feel free to check out the ["Getting Started" section on their documentation](https://behave-django.readthedocs.io/en/stable/usage.html). Here's how it is implemented in this project:
* All the BDD tests are within the [behave_tests](/behave_tests) directory, which is on the root folder of this project.
* Write the `.feature` files within the [features](/behave_tests/features) directory inside the [behave_tests](/behave_tests/) directory.
* Write the steps for processing the features within the [steps](/behave_tests/steps) directory inside the [behave_tests](/behave_tests/) directory.

## TDD tests
TDD for this project is implemented using the default [testing framework provided by Django](https://docs.djangoproject.com/en/4.0/topics/testing/overview/). Testing the REST Framework might include some additional stuff, which can be found [here](https://www.django-rest-framework.org/api-guide/testing/).

Here's how you can run the tests:
* To run the tests without generating coverage reports (recommended for CI), just run `python3 manage.py test`.
  * In order to test one specific app within Django, you can add the app's name in the above command like: `python3 manage.py test <name_of_the_app>`.
  * For instance, if you want to test only the app named `user_mgmt`, you must run the following command: `python3 manage.py test user_mgmt`.
* To run the tests with coverage reports (recommended that you do this on your local environment), run the following commands:
  * This command runs the tests and calculates the coverage: `coverage run --source='.' manage.py test`.
    * You may also test a specific app by just adding the app's name in the above command like: `coverage run --source='.' manage.py test <name_of_the_app>`
  * To view the coverage report, please run the following command after running the command above: `coverage report`.